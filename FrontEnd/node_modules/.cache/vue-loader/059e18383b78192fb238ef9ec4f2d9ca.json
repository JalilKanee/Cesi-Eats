{"remainingRequest":"C:\\Users\\Jalil\\Desktop\\Cesi Eats\\FrontEnd\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Users\\Jalil\\Desktop\\Cesi Eats\\FrontEnd\\src\\components\\ManagerComponents\\CommandeList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Jalil\\Desktop\\Cesi Eats\\FrontEnd\\src\\components\\ManagerComponents\\CommandeList.vue","mtime":1656449227422},{"path":"C:\\Users\\Jalil\\Desktop\\Cesi Eats\\FrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":1655795065335},{"path":"C:\\Users\\Jalil\\Desktop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656358477747},{"path":"C:\\Users\\Jalil\\Desktop\\Cesi Eats\\FrontEnd\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1655795068176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgT3JkZXJTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvT3JkZXJTZXJ2aWNlIjsNCmltcG9ydCB7IGlvIH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7DQppbXBvcnQgTm90aWZpY2F0aW9uU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL05vdGlmaWNhdGlvblNlcnZpY2UiOw0KaW1wb3J0IEpRdWVyeSBmcm9tICdqcXVlcnknOw0Kd2luZG93LiQgPSBKUXVlcnkNCi8vIGltcG9ydCBKUXVlcnkgZnJvbSAnanF1ZXJ5Jw0KLy8gd2luZG93LiQgPSBKUXVlcnkNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQ29tbWFuZGUtbGlzdCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIE9yZGVyczogW10sDQogICAgICBjdXJyZW50VHV0b3JpYWw6IG51bGwsDQogICAgICBjdXJyZW50SW5kZXg6IC0xLA0KICAgICAgdGl0bGU6ICIiLA0KICAgICAgc29ja2V0IDogaW8oJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMCcsIHsgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnLCAncG9sbGluZycsICdmbGFzaHNvY2tldCddfSksDQoNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmV0cmlldmVPcmRlcnMoKSB7DQogICAgICAgIE9yZGVyU2VydmljZS5nZXRBbGwoKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICB0aGlzLk9yZGVycyA9IHJlc3BvbnNlLmRhdGEgOw0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHJlYWx0aW1lT3JkZXIoKXsNCiAgICAgICAgdmFyIHNpbyA9IHRoaXMuc29ja2V0Ow0KICAgICAgICBzaW8ub24oJ2Nvbm5lY3QnLCBjb25uZWN0VXNlcik7DQogICAgICAgIGZ1bmN0aW9uIGNvbm5lY3RVc2VyICgpIHsgIC8vIENhbGxlZCB3aGVuZXZlciBhIHVzZXIgc2lnbnMgaW4NCiAgICAgICAgdmFyIHVzZXJJZCA9IDUwIC8vIFJldHJpZXZlIHVzZXJJZA0KICAgICAgICBpZiAoIXVzZXJJZCkgcmV0dXJuOw0KICAgICAgICBzaW8uZW1pdCgndXNlckNvbm5lY3RlZCcsICB1c2VySWQpOw0KICAgICAgfQ0KICAgICAgICBzaW8ub24oJ2dldGNvbW1hbmRlc2F0dXQnLGZ1bmN0aW9uKGRhdGEpew0KICAgICAgICAgICAgJCgnI3N0YXRlLScrZGF0YS5pZCkuZW1wdHkoKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgICAgaWYoZGF0YS5zdGF0dXRfcmVzdGF1cmFudCA9PSAxKXsNCiAgICAgICAgICAgICQoJyNzdGF0ZS0nK2RhdGEuaWQpLmFwcGVuZCggYDxsaSAgY2xhc3M9Imxpc3QtZ3JvdXAtaXRlbSBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICBBY2NlcHTDqWUNCiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYmFkZ2UgYmFkZ2UtcHJpbWFyeSBiYWRnZS1waWxsIj48aSBjbGFzcz0iYmkgaDQgYmktZG90Ij48L2k+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+YCApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoZGF0YS5zdGF0dXRfbGl2cmV1ciA9PSAxKXsNCiAgICAgICAgICAgICQoJyNzdGF0ZS0nK2RhdGEuaWQpLmFwcGVuZCggYDxsaSAgY2xhc3M9Imxpc3QtZ3JvdXAtaXRlbSBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICBQcmlzZSBlbiBjaGFyZ2UNCiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYmFkZ2UgYmFkZ2UtcHJpbWFyeSBiYWRnZS1waWxsIj48aSBjbGFzcz0iYmkgaDQgYmktZG90Ij48L2k+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+YCApOw0KDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmKGRhdGEuc3RhdHV0X2xpdnJldXIgPT0gMil7DQogICAgICAgICAgICAkKCcjc3RhdGUtJytkYXRhLmlkKS5hcHBlbmQoIGA8bGkgIGNsYXNzPSJsaXN0LWdyb3VwLWl0ZW0gZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIGFsaWduLWl0ZW1zLWNlbnRlciI+DQogICAgICAgICAgICAgICAgICAgICAgTGl2csOpZQ0KICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYWRnZSBiYWRnZS1wcmltYXJ5IGJhZGdlLXBpbGwiPjxpIGNsYXNzPSJiaSBoNCBiaS1kb3QiPjwvaT48L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgPC9saT5gICk7DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KDQogICAgICAgIH0pOw0KDQogICAgfQ0KICAgICAgICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMucmV0cmlldmVPcmRlcnMoKTsNCiAgICAgICAgdGhpcy5yZWFsdGltZU9yZGVyKCk7DQoNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["CommandeList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"CommandeList.vue","sourceRoot":"src/components/ManagerComponents","sourcesContent":["<template>\r\n    <div style=\"padding-top: 150px;\">\r\n    <h1 style=\"font-weight: 700;color:black;box-shadow: rgba(0, 0, 0.70, 0.35) 0px 5px 15px;\">Commandes des clients</h1>\r\n        <div class=\"container mt-2\" style=\"box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\">\r\n            <table class=\"table bg-light\">\r\n                <thead>\r\n                    <tr>\r\n                    <th scope=\"col\"># Numéro Commande</th>\r\n                    <th scope=\"col\">Product</th>\r\n                    <th scope=\"col\">Client</th>\r\n                    <th scope=\"col\">Restaurant</th>\r\n                    <th scope=\"col\">Livreur</th>\r\n                    <th scope=\"col\">Statut</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr :class=\"{ active: index == currentIndex }\"\r\n          v-for=\"(Order, index) in Orders\"\r\n          :key=\"index\">\r\n                    <td>{{Order._id}}</td>\r\n                      <td>\r\n                        <ul class=\"{ active: index == currentIndex }\"\r\n                        v-for=\"(id_article, index) in Order.ids_article\"\r\n                        :key=\"index\" >\r\n                          <li>{{id_article}}</li>\r\n                        </ul>\r\n                      </td>\r\n                    <td>{{Order.id_client}}</td>\r\n                    <td>{{Order.id_restaurant}}</td>\r\n                    <td>{{Order.id_livreur}}</td>\r\n                    <td :id=\"'state-'+Order._id\">\r\n                      <li v-if=\"Order.statut_livreur == 0\" class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      En Attente\r\n                      <span class=\"badge badge-primary badge-pill\"><i class=\"bi h4 bi-dot\"></i></span>\r\n                      </li>\r\n                       <li v-if=\"Order.statut_livreur == 1\" class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                        Prise en Charge\r\n                      <span class=\"badge badge-primary badge-pill\"><i class=\"bi h4 bi-dot\"></i></span>\r\n                      </li>\r\n                      <li v-if=\"Order.statut_livreur == 2\" class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                        Livrée\r\n                      <span class=\"badge badge-success badge-pill\"><i class=\"bi h4 bi-dot\"></i></span>\r\n                      </li>\r\n                    </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>    \r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport OrderService from \"@/services/OrderService\";\r\nimport { io } from 'socket.io-client';\r\nimport NotificationService from \"@/services/NotificationService\";\r\nimport JQuery from 'jquery';\r\nwindow.$ = JQuery\r\n// import JQuery from 'jquery'\r\n// window.$ = JQuery\r\n\r\nexport default {\r\n  name: \"Commande-list\",\r\n  data() {\r\n    return {\r\n      Orders: [],\r\n      currentTutorial: null,\r\n      currentIndex: -1,\r\n      title: \"\",\r\n      socket : io('http://localhost:4000', { transports: ['websocket', 'polling', 'flashsocket']}),\r\n\r\n    };\r\n  },\r\n  methods: {\r\n    retrieveOrders() {\r\n        OrderService.getAll()\r\n        .then(response => {\r\n            this.Orders = response.data ;\r\n            console.log(response.data);\r\n        })\r\n        .catch(e => {\r\n            console.log(e);\r\n        });\r\n    },\r\n    realtimeOrder(){\r\n        var sio = this.socket;\r\n        sio.on('connect', connectUser);\r\n        function connectUser () {  // Called whenever a user signs in\r\n        var userId = 50 // Retrieve userId\r\n        if (!userId) return;\r\n        sio.emit('userConnected',  userId);\r\n      }\r\n        sio.on('getcommandesatut',function(data){\r\n            $('#state-'+data.id).empty();\r\n            console.log(data);\r\n            if(data.statut_restaurant == 1){\r\n            $('#state-'+data.id).append( `<li  class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      Acceptée\r\n                      <span class=\"badge badge-primary badge-pill\"><i class=\"bi h4 bi-dot\"></i></span>\r\n                      </li>` );\r\n            }\r\n            \r\n            \r\n            \r\n            if(data.statut_livreur == 1){\r\n            $('#state-'+data.id).append( `<li  class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      Prise en charge\r\n                      <span class=\"badge badge-primary badge-pill\"><i class=\"bi h4 bi-dot\"></i></span>\r\n                      </li>` );\r\n\r\n            }\r\n\r\n            if(data.statut_livreur == 2){\r\n            $('#state-'+data.id).append( `<li  class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                      Livrée\r\n                      <span class=\"badge badge-primary badge-pill\"><i class=\"bi h4 bi-dot\"></i></span>\r\n                      </li>` );\r\n\r\n            }\r\n            \r\n\r\n        });\r\n\r\n    }\r\n        },\r\n  mounted() {\r\n    this.retrieveOrders();\r\n        this.realtimeOrder();\r\n\r\n  }\r\n};\r\n</script>\r\n<style>\r\n  @import '@/assets/css/Restaurateur.css';\r\n</style>"]}]}