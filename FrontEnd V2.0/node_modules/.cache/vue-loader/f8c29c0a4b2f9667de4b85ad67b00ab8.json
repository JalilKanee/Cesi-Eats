{"remainingRequest":"C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\src\\views\\Login.vue","mtime":1656483665371},{"path":"C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656358477747},{"path":"C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\node_modules\\babel-loader\\lib\\index.js","mtime":1656358495050},{"path":"C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656358477747},{"path":"C:\\Users\\Jalil\\Desktop\\Projet\\V2.0\\node_modules\\vue-loader\\lib\\index.js","mtime":1656358496013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTsKaW1wb3J0IHsgTG9naW5DYXJkIH0gZnJvbSAiQC9jb21wb25lbnRzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2dpbkNhcmQKICB9LAogIGJvZHlDbGFzczogImxvZ2luLXBhZ2UiLAoKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHVzZXI6eyAKICAgICAgICAgICAgICAgIGVtYWlsOiIiLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IiIsCiAgICAgICAgICAgICAgICBjb25uZWN0aW9uU3RhdHVzOiJDb25uZWN0ZWQiLAogICAgICAgICAgICAgICAgdXNlcl90eXBlOiIiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczogewogICAgaGVhZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogcmVxdWlyZSgiQC9hc3NldHMvaW1nL2JnaG9tZS5qcGciKQogICAgfQogIH0sCgogY29tcHV0ZWQ6IHsKICAgIGJ1dHRvbkxhYmVsKCkgewogICAgICByZXR1cm4gKHRoaXMuc2hvd1Bhc3N3b3JkKSA/ICJIaWRlIiA6ICJTaG93IjsKICAgIH0sCiAgICBoZWFkZXJTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHt0aGlzLmhlYWRlcn0pYAogICAgICB9OwogICAgfQogIH0sCiAgICBtZXRob2RzOnsKICAgICAgICB0b2dnbGVTaG93KCkgewogICAgICB0aGlzLnNob3dQYXNzd29yZCA9ICF0aGlzLnNob3dQYXNzd29yZDsKICAgIH0sCiAgICAgICAgc2lnbnVwKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ3JlZ2lzdGVyJ30pOwogICAgICAgIH0sCiAgICAgICAgbG9naW4oKXsKICAgICAgICAgICAgaWYodGhpcy5jaGVja1ZhbGlkYXRpb24oKSl7CiAgICAgICAgICAgICAgICBheGlvcy5nZXQodGhpcy4kaG9zdG5hbWUgKyIvYXBpL3VzZXIvc2lnbmluLyIrdGhpcy51c2VyLmVtYWlsKyIvIit0aGlzLnVzZXIucGFzc3dvcmQpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEudXNlcklkID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLnRva2VuKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudG9rZW4gPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEudXNlcl90eXBlID09PSAiQ2xpZW50Iil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ImNsaWVudCJ9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiQ29ubmVjdGVyIGVuIHRhbnQgcXVlIENsaWVudCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS51c2VyX3R5cGUgPT09ICJSZXN0b3JhdGV1ciIpewogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiJtZW51In0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiQ29ubmVjdGVyIGVuIHRhbnQgcXVlIFJlc3RvcmF0ZXVyIikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS51c2VyX3R5cGUgPT09ICJMaXZyZXVyIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ImxpdnJldXIifSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJDb25uZWN0ZXIgZW4gdGFudCBxdWUgTGl2cmV1ciIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNoZWNrVmFsaWRhdGlvbigpewogICAgICAgICAgICBpZighdGhpcy51c2VyLmVtYWlsKXsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZW1haWwuZm9jdXMoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCJFbnRlciB2b3RyZSBlbWFpbCIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCF0aGlzLnVzZXIucGFzc3dvcmQpewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wc3cuZm9jdXMoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCJFbnRlciB2b3RyZSBtb3QgZGUgcGFzc2UiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIFRvZ2dsZSgpIHsKICAgICAgICAgICAgdmFyIHRlbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidHlwZXBhc3MiKTsKICAgICAgICAgICAgaWYgKHRlbXAudHlwZSA9PT0gInBhc3N3b3JkIikgewogICAgICAgICAgICAgICAgdGVtcC50eXBlID0gInRleHQiOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvZ2dsZVBhc3N3b3JkIikuY2xhc3NOYW1lID0gImJpIGJpLWV5ZS1zbGFzaCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0ZW1wLnR5cGUgPSAicGFzc3dvcmQiOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvZ2dsZVBhc3N3b3JkIikuY2xhc3NOYW1lID0gImJpIGJpLWV5ZSI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgfQogICAgfQoK"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"section page-header header-filter\" :style=\"headerStyle\">\n      <div class=\"container\">\n        <div class=\"md-layout\">\n          <div\n            class=\"md-layout-item md-size-33 md-small-size-66 md-xsmall-size-100 md-medium-size-40 mx-auto\"\n          >\n            <login-card header-color=\"black\">\n              <h4 slot=\"title\" class=\"card-title\">Se connecter</h4>\n              <md-button\n                slot=\"buttons\"\n                href=\"javascript:void(0)\"\n                class=\"md-just-icon md-simple md-white\"\n              >\n                <i class=\"fab fa-facebook-square\"></i>\n              </md-button>\n              <md-button\n                slot=\"buttons\"\n                href=\"javascript:void(0)\"\n                class=\"md-just-icon md-simple md-white\"\n              >\n                <i class=\"fab fa-twitter\"></i>\n              </md-button>\n              <md-button\n                slot=\"buttons\"\n                href=\"javascript:void(0)\"\n                class=\"md-just-icon md-simple md-white\"\n              >\n                <i class=\"fab fa-google-plus-g\"></i>\n              </md-button>\n              <p slot=\"description\" class=\"description\">Ou</p>\n              <md-field aria-placeholder=\"gg\" class=\"md-form-group\" slot=\"inputs\">\n                <md-icon>email</md-icon>\n                <label>E-mail</label>\n                <md-input v-model=\"user.email\" type=\"email\"></md-input>\n              </md-field>\n              <md-field class=\"md-form-group\" slot=\"inputs\">\n                <md-icon>lock_outline</md-icon>\n                <label>Mot de passe</label>\n                <md-input v-model=\"user.password\" type=\"password\"></md-input>\n              </md-field>\n              <md-button v-on:click=\"login\" slot=\"footer\" class=\"md-success\">\n                Se connecter\n              </md-button>\n            </login-card>\n            <p class=\"text-center\" style=\"padding-top: 20px;\">\n            <router-link id=\"login\" to=\"/login\">Vous avez déjà un compte ? Se Connecter</router-link></p>\n            <p class=\"text-center\" style=\"padding-top: 20px;\">\n            <router-link id=\"login\" to=\"/forget-password\">Mot de passe oublié ?</router-link></p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nconst axios = require('axios');\nimport { LoginCard } from \"@/components\";\n\nexport default {\n  components: {\n    LoginCard\n  },\n  bodyClass: \"login-page\",\n\n    data(){\n        return{\n            user:{ \n                email:\"\",\n                password:\"\",\n                connectionStatus:\"Connected\",\n                user_type:\"\"\n                \n            }\n        }\n    },\n    props: {\n    header: {\n      type: String,\n      default: require(\"@/assets/img/bghome.jpg\")\n    }\n  },\n\n computed: {\n    buttonLabel() {\n      return (this.showPassword) ? \"Hide\" : \"Show\";\n    },\n    headerStyle() {\n      return {\n        backgroundImage: `url(${this.header})`\n      };\n    }\n  },\n    methods:{\n        toggleShow() {\n      this.showPassword = !this.showPassword;\n    },\n        signup(){\n            this.$router.push({ name: 'register'});\n        },\n        login(){\n            if(this.checkValidation()){\n                axios.get(this.$hostname +\"/api/user/signin/\"+this.user.email+\"/\"+this.user.password)\n                .then(response=>{\n                    if(response.data.userId > 0){\n                        console.log(response.data.token);\n                        localStorage.setItem('token', JSON.stringify(response.data.token));\n                        response.data.token = \"\";\n                        localStorage.setItem('user', JSON.stringify(response.data));\n                        if(response.data.user_type === \"Client\"){\n                             this.$router.push({name:\"client\"});\n                             alert(\"Connecter en tant que Client\")\n                        }\n                        if(response.data.user_type === \"Restorateur\"){\n                          this.$router.push({name:\"menu\"});\n                           alert(\"Connecter en tant que Restorateur\")\n                        }\n                         if(response.data.user_type === \"Livreur\"){\n                          this.$router.push({name:\"livreur\"});\n                           alert(\"Connecter en tant que Livreur\")\n                        }\n                       \n                        \n                    }\n                })\n               \n                .catch(error => {\n                    if(error.response) {\n                        alert(error.response.data);\n                    }\n                })\n            }\n        },\n        checkValidation(){\n            if(!this.user.email){\n                this.$refs.email.focus();\n                alert(\"Enter votre email\");\n                return;\n            }\n            if(!this.user.password){\n                this.$refs.psw.focus();\n                alert(\"Enter votre mot de passe\");\n                return;\n            }\n            return true;\n        },\n        Toggle() {\n            var temp = document.getElementById(\"typepass\");\n            if (temp.type === \"password\") {\n                temp.type = \"text\";\n                document.getElementById(\"togglePassword\").className = \"bi bi-eye-slash\";\n            }\n            else {\n                temp.type = \"password\";\n                document.getElementById(\"togglePassword\").className = \"bi bi-eye\";\n            }\n        }\n        }\n    }\n\n</script>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<style lang=\"css\"></style>\n"]}]}